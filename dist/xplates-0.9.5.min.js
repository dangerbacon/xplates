/** XPlates version 0.9.5
  * @license MIT
  * @preserve 
 **/
XPlates=function(){function r(){return this instanceof r?r:o.call(null,null,arguments)}function n(r){var n=r.match(w);if(!n)throw new Error('XPlates:  Improper format for array iterator "'+r+'"');return{l:S(),i:S(n[3]),v:S(n[5],!0),o:n[1]}}function e(r,n){return JSON.stringify(h?h(r,n):r)}function t(r,n){return r.length?y()+e(r,n):""}function a(r,n,a,o,u){var h=a||"xplate",m=n||["arg"];i=0,l={},p=f=S(u.outvar||P,!1,""),c=[],g=!1,s=!1;var _,w="",d=0,x=v.ops||{};for(o.lastIndex=null;_=o.exec(r);){if(w+=t(r.substr(d,_.index-d),u),!g||"!"===_[1]&&/^[\s\r\n]*noparse[\s\r\n]*=/.test(_[2])){var y=_[1],E=x[y]||O[y];if(!E)throw new Error("XPlates:  Undefined operator "+y);w+=E(_[2].replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s*\/\/.*$/gm,"").trim())}else w+=t(_[0],u);d=_.index+_[0].length}if(c.length)throw new Error("XPlates:  Unmatched @ operators!");if(c.length)throw new Error("XPlates:  Unmatched @ operators!");d?w+=t(r.substr(d,r.length-d),u)+X()+"return "+f+"; }":(w="return "+e(r,u)+"; }",l={},m=[]);var b="return function "+h+"("+m.join(",")+"){",$=0;for(var I in l)b+=($++?",":"var ")+I+("undefined"==typeof l[I]?"":"="+JSON.stringify(l[I]));b+=";";var U=[],J=[],N=v.reqs||{};for(var I in N)U.push(I),J.push(N[I]);for(var I in u.predefined||{})U.push(I),J.push(u.predefined[I]);U.push(b+w);try{var q=Function.apply(null,U).apply(null,J);return q}catch(F){throw F.message="XPlates compile error: "+F.message+"\n"+b+w,F}}function o(n,e){var t=e[0],o=e[1],u=e[2],i=e[3],s=e[4]||{};if(!r.languages.hasOwnProperty(t))throw new Error("XPlates: Unknown language "+t);if(v=r.languages[t],v.init&&v.init(),h=null,s.preprocess){var l=[],f=[];for(var p in s.preprocess)l.push(p),f.push(s.preprocess[p]);var c=a(o,l,null,_,s);o=c.apply(null,f)}h=v.filter;var g=a(o,u,i,m,s);return n&&i&&(n[i]=g,g.__xplate_language=t),g}function u(n){var e={},t="",a="";t+="var "+(n||"xplates")+"=new (function(){\n";for(var o in this){var u=this[o];if("function"==typeof u&&"string"==typeof u.__xplate_language&&(a+="this["+JSON.stringify(o)+"] = "+u.toString()+";\n",!e[u.__xplate_language])){e[u.__xplate_language]=!0;var i=r.languages[u.__xplate_language].reqs;for(var s in i){var l=i[s];t+="var "+s+" = "+("function"==typeof l?l.toString():JSON.stringify(l))+";\n"}}}return a+="})();\n",t+a}var i,s,l,f,p,c,g,v,h,m=/<%([~!@$^*\-=+:.\?]*)[\s\r\n]*([\s\S]*?)[\s\r\n;]*%>/g,_=/<#([~!@$^*\-=+:.\?]*)[\s\r\n]*([\s\S]*?)[\s\r\n;]*#>/g,w=/^(.*?)[\s\r\n]*(:[\s\r\n]*(\w+)?)?[\s\r\n]*(:[\s\r\n]*(\w+)?)?$/,d=/^(\w+)[\s\r\n]*=(.*)$/,x=/^[a-z_$][\w$]*$/i,P="out",y=r.sIn=function(){return s?"+":(s=!0)&&p+"+="},X=r.sOut=function(){return s?(s=!1)||";":""},S=r.sVar=function(r,n,e){if(!r){if(n)return null;r="__xp"+ ++i}return l[r]=e,r},E=r.sEscape=function(r){return(v.escapeFunc||"")+"("+r+")"},O={};return O[""]=function(r){return X()+r+";"},O["="]=function(r){return y()+E('""+('+r+")")},O["=="]=function(r){return y()+'(""+('+r+"))"},O["?"]=function(r){return r?X()+"if("+r+"){":X()+"};"},O["??"]=function(r){return r?X()+"}else if("+r+"){":X()+"} else {"},O["~"]=function(r){if(!r)return X()+"};";var e=n(r);return X()+e.l+"="+e.o+";for("+e.i+"=0;"+e.i+"<"+e.l+".length;"+e.i+"++){"+(e.v?e.v+"="+e.l+"["+e.i+"];":"")},O["~~"]=function(r){if(!r)return X()+"};";var e=n(r);return X()+e.l+"="+e.o+";for("+e.i+"="+e.l+".length-1;"+e.i+">=0;"+e.i+"--){"+(e.v?e.v+"="+e.l+"["+e.i+"];":"")},O["+"]=function(r){if(!r)return X()+"};";var e=n(r);return X()+e.l+"="+e.o+";for("+e.i+" in "+e.l+"){"+(e.v?e.v+"="+e.l+"["+e.i+"];":"")},O["!"]=function(r){var n=X(),e=r.match(d);if(!e)throw new Error('XPlates:  Improper format for option setting "'+r+'"');var t=e[1];try{var a=JSON.parse(e[2])}catch(o){throw new Error('XPlates:  Invalid JSON for option value "'+e[2]+'"')}switch(t){case"noparse":g=!!a;break;default:throw new Error("XPlates:  Unknown option "+t)}return n},O["@"]=function(r){if(r){if(!x.test(r))throw new Error("XPlates:  Invalid variable name "+r);return c.push(p),p=r,S(r),X()+r+'="";'}if(!c.length)throw new Error("XPlates:  Unmatched @ operators!");return p=c.pop(),X()},r.bundle=function(){var r=function(){return o.call(null,r,arguments)};return Object.defineProperty(r,"toString",{value:u}),r},r.languages={},r}(),function(){function r(){a=[],o=!1}function n(r,n){if(!n.strip)return r;for(var e,t,s="";e=u.exec(r);)if(e[1]){if(o=!0,s+=e[1],e[3]){var l=e[3].toLowerCase();if(l in i)if(e[2])for(;(t=a.pop())&&t!==l;);else a.push(l)}}else e[4]?(o=!1,s+=e[4]):s+=!a.length||o?e[5].trim().replace(/\s*[\r\n][\r\n\s]*/g,"\n").replace(/\s+/g," ").replace(/"\s+/g,'"').replace(/\s+"/g,'"'):e[5];return s}function __xphtmlreplace(r){return __xphtmlchars[r]}function __xphtmlescape(r){return r.replace(/[&<>"']/g,__xphtmlreplace)}function e(r){return s[r]}function t(r){return r.replace(/[&<]/g,e)}var a,o,u=/(<(\/?)([\w\-!]*)[\s\r\n]?)|(>)|([^<>]+)/g,i={script:!0,pre:!0};XPlates.languages.text={};var __xphtmlchars={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};XPlates.languages.html={escapeFunc:"__xphtmlescape",reqs:{__xphtmlchars:__xphtmlchars,__xphtmlescape:__xphtmlescape,__xphtmlreplace:__xphtmlreplace},init:r,filter:n};var s={"&":"&amp;","<":"&lt;"};XPlates.languages.md={escapeFunc:"__xpmdescape",reqs:{__xpmdchars:s,__xpmdescape:t,__xpmdreplace:e}},XPlates.languages.url={escapeFunc:"encodeURIComponent"}}(),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=XPlates);