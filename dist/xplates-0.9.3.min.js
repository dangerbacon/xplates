/** XPlates version 0.9.3
  * @license undefined
  * @preserve 
 **/
XPlates=function(){function r(){return this instanceof r?r:a.call(null,null,arguments)}function e(r){var e=r.match(m);if(!e)throw new Error('XPlates:  Improper format for array iterator "'+r+'"');return{l:y(),i:y(e[3]),v:y(e[5],!0),o:e[1]}}function n(r,e){return r.length?d()+JSON.stringify(g?g(r,e):r):""}function t(r,e,t,a,o){t=t||"xplate",e=e||["arg"],u=0,s={},f=l=y(o.outvar||w,!1,""),p=!1,i=!1;for(var g,v="",h=0,m=c.ops||{};g=a.exec(r);){if(v+=n(r.substr(h,g.index-h),o),!p||"!"===g[1]&&/^[\s\r\n]*noparse[\s\r\n]*=/.test(g[2])){var _=g[1],d=m[_]||X[_];if(!d)throw new Error("XPlates:  Undefined operator "+_);v+=d(g[2].replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s*\/\/.*$/gm,"").trim())}else v+=n(g[0],o);h=g.index+g[0].length}v+=n(r.substr(h,r.length-h),o),v+=x()+"return "+f+"; }";var P="return function "+t+"("+e.join(",")+"){var ",b=0;for(var S in s)P+=(b++?",":"")+S+("undefined"==typeof s[S]?"":"="+JSON.stringify(s[S]));P+=";";var E=[],O=[],$=c.reqs||{};for(var S in $)E.push(S),O.push($[S]);for(var S in o.predefined||{})E.push(S),O.push(o.predefined[S]);E.push(P+v);try{var J=Function.apply(null,E).apply(null,O);return J}catch(N){throw N.message="XPlates compile error: "+N.message+"\n"+P+v,N}}function a(e,n){var a=n[0],o=n[1],u=n[2],i=n[3],s=n[4]||{};if(!r.languages.hasOwnProperty(a))throw new Error("XPlates: Unknown language "+a);if(c=r.languages[a],c.init&&c.init(),g=null,s.preprocess){var l=[],f=[];for(var p in s.preprocess)l.push(p),f.push(s.preprocess[p]);var m=t(o,l,null,h,s);o=m.apply(null,f)}g=c.filter;var _=t(o,u,i,v,s);return e&&i&&(e[i]=_,_.__xplate_language=a),_}function o(e){var n={},t="",a="";t+="var "+(e||"xplates")+"=new (function(){\n";for(var o in this){var u=this[o];if("function"==typeof u&&"string"==typeof u.__xplate_language&&(a+="this["+JSON.stringify(o)+"] = "+u.toString()+";\n",!n[u.__xplate_language])){n[u.__xplate_language]=!0;var i=r.languages[u.__xplate_language].reqs;for(var s in i){var l=i[s];t+="var "+s+" = "+("function"==typeof l?l.toString():JSON.stringify(l))+";\n"}}}return a+="})();\n",t+a}var u,i,s,l,f,p,c,g,v=/<%([~!@$^*\-=+:.\?]*)[\s\r\n]*([\s\S]*?)[\s\r\n;]*%>/g,h=/<#([~!@$^*\-=+:.\?]*)[\s\r\n]*([\s\S]*?)[\s\r\n;]*#>/g,m=/^(.*?)[\s\r\n]*(:[\s\r\n]*(\w+)?)?[\s\r\n]*(:[\s\r\n]*(\w+)?)?$/,_=/^(\w+)[\s\r\n]*=(.*)$/,w="out",d=r.sIn=function(){return i?"+":(i=!0)&&l+"+="},x=r.sOut=function(){return i?(i=!1)||";":""},y=r.sVar=function(r,e,n){if(!r){if(e)return null;r="__xp"+ ++u}return s[r]=n,r},P=r.sEscape=function(r){return(c.escapeFunc||"")+"("+r+")"},X={};return X[""]=function(r){return x()+r+";"},X["="]=function(r){return d()+P('""+('+r+")")},X["=="]=function(r){return d()+'(""+('+r+"))"},X["?"]=function(r){return r?x()+"if("+r+"){":x()+"};"},X["??"]=function(r){return r?x()+"}else if("+r+"){":x()+"} else {"},X["~"]=function(r){if(!r)return x()+"};";var n=e(r);return x()+n.l+"="+n.o+";for("+n.i+"=0;"+n.i+"<"+n.l+".length;"+n.i+"++){"+(n.v?n.v+"="+n.l+"["+n.i+"];":"")},X["~~"]=function(r){if(!r)return x()+"};";var n=e(r);return x()+n.l+"="+n.o+";for("+n.i+"="+n.l+".length-1;"+n.i+">=0;"+n.i+"--){"+(n.v?n.v+"="+n.l+"["+n.i+"];":"")},X["+"]=function(r){if(!r)return x()+"};";var n=e(r);return x()+n.l+"="+n.o+";for("+n.i+" in "+n.l+"){"+(n.v?n.v+"="+n.l+"["+n.i+"];":"")},X["!"]=function(r){var e=x(),n=r.match(_);if(!n)throw new Error('XPlates:  Improper format for option setting "'+r+'"');var t=n[1];try{var a=JSON.parse(n[2])}catch(o){throw new Error('XPlates:  Invalid JSON for option value "'+n[2]+'"')}switch(t){case"outvar":if("string"!=typeof a||!a.match(/^\w+$/))throw new Error("XPlates:  outvar must be a valid variable name! "+r);l=y(a,!1,"");break;case"returnvar":if("string"!=typeof a||!a.match(/^\w+$/))throw new Error("XPlates:  returnvar must be a valid variable name! "+r);f=y(a,!1,"");break;case"noparse":p=!!a;break;default:throw new Error("XPlates:  Unknown option "+t)}return e},r.bundle=function(){var r=function(){return a.call(null,r,arguments)};return Object.defineProperty(r,"toString",{value:o}),r},r.languages={},r}(),function(){function r(){a=[],o=!1}function e(r,e){if(!e.strip)return r;for(var n,t,s="";n=u.exec(r);)if(n[1]){if(o=!0,s+=n[1],n[3]){var l=n[3].toLowerCase();if(l in i)if(n[2])for(;(t=a.pop())&&t!==l;);else a.push(l)}}else n[4]?(o=!1,s+=n[4]):s+=!a.length||o?n[5].trim().replace(/\s*[\r\n][\r\n\s]*/g,"\n").replace(/\s+/g," ").replace(/"\s+/g,'"').replace(/\s+"/g,'"'):n[5];return s}function __xphtmlreplace(r){return __xphtmlchars[r]}function __xphtmlescape(r){return r.replace(/[&<>"']/g,__xphtmlreplace)}function n(r){return s[r]}function t(r){return r.replace(/[&<]/g,n)}var a,o,u=/(<(\/?)([\w\-!]*)[\s\r\n]?)|(>)|([^<>]+)/g,i={script:!0,pre:!0};XPlates.languages.text={};var __xphtmlchars={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};XPlates.languages.html={escapeFunc:"__xphtmlescape",reqs:{__xphtmlchars:__xphtmlchars,__xphtmlescape:__xphtmlescape,__xphtmlreplace:__xphtmlreplace},init:r,filter:e};var s={"&":"&amp;","<":"&lt;"};XPlates.languages.md={escapeFunc:"__xpmdescape",reqs:{__xpmdchars:s,__xpmdescape:t,__xpmdreplace:n}},XPlates.languages.url={escapeFunc:"encodeURIComponent"}}(),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=XPlates);